---
title: "Model Description"
bibliography: "references.bib"
csl: "ecology.csl"
execute: 
  echo: false
format:
  html:
    toc: true
    toc-depth: 4
    code-fold: true
    code-link: true
  pdf:
    toc: true
    toc-depth: 4
    number-sections: true
    number-depth: 4
editor: 
  markdown: 
    wrap: 72
---
# Degradation

Habitat structure

## Algae

Algae, which consists of macroalgae and turfs, are an important resource
for herbivorous reef fish. The algae resource is described only by its total 
biomass $B_A$. Feeding on algae is not  is not size-based. Herbivores can
feed on algae of any size. 

The rate of change in the total algal biomass is simply the difference
between the rate at which algal biomass is produced and the rate at
which it is consumed, so $$
\frac{dB_A}{dt}=p_A - c_A\,B_A.
$$ {#eq-BC} We will discuss the production rate $p_A$ and the
consumption rate $c_AB_A$ below.

### Parameter values

In the steady state the total algal biomass per square meter is
$B_A = `r signif(algae_biomass(params), digits = 4)`$ grams.

### Algae consumption {#algae-consumption}

Algae is consumed by herbivorous fish. The rate at which algal biomass
is consumed is assumed to be proportional to the available algal
biomass. The proportionality factor $c_A$, which we refer to as the
"mass-specific consumption rate", depends on the abundance of consumers.

For each consumer species $i$, a parameter $\rho_{A.i}$ determines the
rate at which individuals of that species encounter algal biomass. The
rate is assumed to scale with the size of the herbivore raised to an
allometric exponent $n$ which is taken to be the same as the scaling
exponent of the maximum intake rate for consumers,

$$
E_{i.A}(w)=\rho_{i.A}\, w^n\,B_A
$$ {#eq-EC}

Finally we take into account the preference of herbivorous group $i$ for
algae, $\theta_{i.A}$. This gives the mass-specific algal consumption
rate:

$$
c_A = \sum_i\int\rho_{i.D}\, w^n N_i(w)\theta_{i.A}\,dw 
$$ {#eq-cC}

#### Parameter values

::: {.content-visible when-format="html"}
Skip to [Algae production]
:::

The parameters $\rho_{i.A}$ have units of $g^{-n}$ per year. They are
non-zero only for species that consume at least some algae. The
preference $\theta_{i.A}$ for algae is a value between 0 and 1
specifying the proportion of consumer diets that are comprised of 
algal matter.

```{r}
#| label: tbl-rho-a
#| tbl-cap: Parameters determining rates of algae consumption.
params@species_params %>%
    select(rho_algae) %>%
    rename(rho = rho_algae) %>%
    filter(rho > 0) %>%
    kable()
```

### Algae production

```{r include=FALSE}
pA <- params@other_params$algae$algr
```

The rate $p_A$ at which algae biomass is produced by the ecosystem is
given by a constant growth rate with units of grams per unit area per
unit time.

#### Parameter values

The value of $p_A$ is `r params@other_params$algae$algae_growth` grams per 
square meter per year.



